function _slicedToArray(c,t){return _arrayWithHoles(c)||_iterableToArrayLimit(c,t)||_unsupportedIterableToArray(c,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(c,t){if(c){if("string"==typeof c)return _arrayLikeToArray(c,t);var i=Object.prototype.toString.call(c).slice(8,-1);return"Object"===i&&c.constructor&&(i=c.constructor.name),"Map"===i||"Set"===i?Array.from(c):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(c,t):void 0}}function _arrayLikeToArray(c,t){(null==t||t>c.length)&&(t=c.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=c[i];return n}function _iterableToArrayLimit(c,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(c)){var i=[],n=!0,e=!1,o=void 0;try{for(var r,a=c[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(s){e=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(e)throw o}}return i}}function _arrayWithHoles(c){if(Array.isArray(c))return c}function _classCallCheck(c,t){if(!(c instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(c,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(c,n.key,n)}}function _createClass(c,t,i){return t&&_defineProperties(c.prototype,t),i&&_defineProperties(c,i),c}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{HAxo:function(c,t,i){"use strict";i.r(t),i.d(t,"TankerPageModule",(function(){return Y}));var n=i("ofXK"),e=i("3Pt+"),o=i("tyNb"),r=i("TEn/"),a=i("mrSG"),s=i("lJxs"),u=i("fXoL"),l=i("pwB6"),h=i("sYmb"),g=["mySearchbar"],f=["ocontent"];function m(c,t){if(1&c){var i=u.ic();u.hc(0,"ion-item"),u.hc(1,"ion-avatar",10),u.pc("click",(function(){u.Nc(i);var c=t.$implicit;return u.tc(2).showPhoto(c.image,c.name)})),u.cc(2,"img",11),u.gc(),u.hc(3,"h2"),u.Xc(4),u.gc(),u.hc(5,"p"),u.Xc(6),u.uc(7,"translate"),u.gc(),u.hc(8,"p"),u.Xc(9),u.gc(),u.hc(10,"button",12),u.pc("click",(function(){u.Nc(i);var c=t.$implicit;return u.tc(2).gotoExternal("tel:"+c.mobile)})),u.cc(11,"ion-icon",13),u.Xc(12),u.uc(13,"translate"),u.gc(),u.gc()}if(2&c){var n=t.$implicit,e=u.tc(2);u.Ob(2),u.Cc("src",e.ygen.getConditionalPhoto(n.image),u.Pc),u.Ob(2),u.Zc("",n.name," "),u.Ob(2),u.Yc(u.vc(7,5,n.category)),u.Ob(3),u.Yc(n.vehicalnum),u.Ob(3),u.Zc(" ",u.vc(13,7,"Call")," ")}}var p=function(){return{check:!0,property:"needParking"}};function d(c,t){if(1&c&&(u.hc(0,"ion-row"),u.hc(1,"ion-col",9),u.hc(2,"ion-list"),u.hc(3,"ion-item"),u.hc(4,"h2"),u.Xc(5),u.uc(6,"translate"),u.gc(),u.gc(),u.Vc(7,m,14,9,"ion-item",8),u.uc(8,"inpipe"),u.uc(9,"async"),u.gc(),u.gc(),u.gc()),2&c){var i=u.tc();u.Ob(5),u.Yc(u.vc(6,2,"Occupied Visitor Parking")),u.Ob(2),u.Cc("ngForOf",u.wc(8,4,u.vc(9,7,i.workers),u.Fc(9,p)))}}function b(c,t){if(1&c&&(u.hc(0,"p"),u.Xc(1),u.uc(2,"translate"),u.gc()),2&c){var i=u.tc().$implicit;u.Ob(1),u.ad("",u.vc(2,2,"Vehical Number")," :",i.vehicalnum,"")}}function y(c,t){1&c&&(u.hc(0,"p"),u.Xc(1,"\xa0\xa0"),u.hc(2,"b",19),u.Xc(3),u.uc(4,"translate"),u.gc(),u.gc()),2&c&&(u.Ob(3),u.Yc(u.vc(4,1,"Out")))}function v(c,t){1&c&&(u.hc(0,"p"),u.Xc(1,"\xa0\xa0"),u.hc(2,"b",20),u.Xc(3),u.uc(4,"translate"),u.gc(),u.gc()),2&c&&(u.Ob(3),u.Yc(u.vc(4,1,"In")))}function k(c,t){if(1&c){var i=u.ic();u.hc(0,"ion-button",21),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc(2).in(c)})),u.cc(1,"ion-icon",22),u.Xc(2),u.uc(3,"translate"),u.gc()}2&c&&(u.Ob(2),u.Zc(" ",u.vc(3,1,"Entering In")," "))}function O(c,t){if(1&c){var i=u.ic();u.hc(0,"ion-button",23),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc(2).out(c)})),u.cc(1,"ion-icon",24),u.Xc(2),u.uc(3,"translate"),u.gc()}2&c&&(u.Ob(2),u.Zc(" ",u.vc(3,1,"Exiting Out")," "))}function C(c,t){if(1&c){var i=u.ic();u.hc(0,"ion-item-options",25),u.hc(1,"ion-item-option",26),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc(2).history(c)})),u.cc(2,"ion-icon",27),u.gc(),u.gc()}}function w(c,t){if(1&c){var i=u.ic();u.hc(0,"ion-item-options",28),u.hc(1,"ion-item-option",29),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc(2).gotoExternal("tel:"+c.mobile)})),u.cc(2,"ion-icon",30),u.gc(),u.hc(3,"ion-item-option",23),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc(2).delete(c)})),u.cc(4,"ion-icon",31),u.gc(),u.hc(5,"ion-item-option",32),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc(2).editMe(c)})),u.cc(6,"ion-icon",33),u.gc(),u.gc()}}function I(c,t){if(1&c){var i=u.ic();u.hc(0,"ion-item-sliding"),u.hc(1,"ion-item"),u.hc(2,"ion-avatar",14),u.pc("click",(function(){u.Nc(i);var c=t.$implicit;return u.tc(2).showPhoto(c.image,c.name)})),u.cc(3,"img",11),u.gc(),u.hc(4,"ion-label"),u.hc(5,"h2"),u.Xc(6),u.gc(),u.hc(7,"p"),u.Xc(8),u.uc(9,"translate"),u.gc(),u.Vc(10,b,3,4,"p",7),u.hc(11,"p"),u.Xc(12),u.gc(),u.Vc(13,y,5,3,"p",7),u.Vc(14,v,5,3,"p",7),u.Vc(15,k,4,3,"ion-button",15),u.Vc(16,O,4,3,"ion-button",16),u.gc(),u.gc(),u.Vc(17,C,3,0,"ion-item-options",17),u.Vc(18,w,7,0,"ion-item-options",18),u.gc()}if(2&c){var n=t.$implicit,e=u.tc(2);u.Ob(3),u.Cc("src",e.ygen.getConditionalPhoto(n.image),u.Pc),u.Ob(3),u.Yc(n.name),u.Ob(2),u.Yc(u.vc(9,11,n.category)),u.Ob(2),u.Cc("ngIf",n.needParking),u.Ob(2),u.Yc(e.ygen.formatTimestampToDate(n.statusdate)),u.Ob(1),u.Cc("ngIf","false"==n.in),u.Ob(1),u.Cc("ngIf","true"==n.in),u.Ob(1),u.Cc("ngIf",e.canido&&"false"==n.in),u.Ob(1),u.Cc("ngIf",e.canido&&"true"==n.in),u.Ob(1),u.Cc("ngIf",e.canido),u.Ob(1),u.Cc("ngIf",e.canido)}}function P(c,t){if(1&c&&(u.hc(0,"ion-list"),u.hc(1,"ion-item"),u.hc(2,"h1"),u.Xc(3),u.uc(4,"translate"),u.hc(5,"b"),u.Xc(6),u.gc(),u.gc(),u.gc(),u.Vc(7,I,19,13,"ion-item-sliding",8),u.hc(8,"ion-row"),u.hc(9,"h1"),u.Xc(10),u.uc(11,"translate"),u.gc(),u.gc(),u.gc()),2&c){var i=u.tc();u.Ob(3),u.Zc("",u.vc(4,4,"Searched list")," \xa0"),u.Ob(3),u.Yc(i.tempItems.length),u.Ob(1),u.Cc("ngForOf",i.tempItems),u.Ob(3),u.Zc(" \xa0",u.vc(11,6,"Out List"),"")}}function X(c,t){if(1&c&&(u.hc(0,"p"),u.Xc(1),u.uc(2,"translate"),u.gc()),2&c){var i=u.tc().$implicit;u.Ob(1),u.ad("",u.vc(2,2,"Vehical Number")," :",i.vehicalnum,"")}}function $(c,t){if(1&c){var i=u.ic();u.hc(0,"ion-button",21),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc().in(c)})),u.cc(1,"ion-icon",22),u.Xc(2),u.uc(3,"translate"),u.gc()}2&c&&(u.Ob(2),u.Zc(" ",u.vc(3,1,"Entering In")," "))}function V(c,t){if(1&c){var i=u.ic();u.hc(0,"ion-item-options",25),u.hc(1,"ion-item-option",26),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc().history(c)})),u.cc(2,"ion-icon",27),u.gc(),u.gc()}}function _(c,t){if(1&c){var i=u.ic();u.hc(0,"ion-item-options",28),u.hc(1,"ion-item-option",29),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc().gotoExternal("tel:"+c.mobile)})),u.cc(2,"ion-icon",30),u.gc(),u.hc(3,"ion-item-option",23),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc().delete(c)})),u.cc(4,"ion-icon",31),u.gc(),u.hc(5,"ion-item-option",32),u.pc("click",(function(){u.Nc(i);var c=u.tc().$implicit;return u.tc().editMe(c)})),u.cc(6,"ion-icon",33),u.gc(),u.gc()}}function S(c,t){if(1&c){var i=u.ic();u.hc(0,"ion-item-sliding"),u.hc(1,"ion-item"),u.hc(2,"ion-avatar",14),u.pc("click",(function(){u.Nc(i);var c=t.$implicit;return u.tc().showPhoto(c.image,c.name)})),u.cc(3,"img",11),u.gc(),u.hc(4,"ion-label"),u.hc(5,"h2"),u.Xc(6),u.gc(),u.hc(7,"p"),u.Xc(8),u.uc(9,"translate"),u.gc(),u.Vc(10,X,3,4,"p",7),u.hc(11,"p"),u.Xc(12),u.gc(),u.hc(13,"p"),u.Xc(14,"\xa0\xa0"),u.hc(15,"b",19),u.Xc(16),u.uc(17,"translate"),u.gc(),u.gc(),u.Vc(18,$,4,3,"ion-button",15),u.gc(),u.gc(),u.Vc(19,V,3,0,"ion-item-options",17),u.Vc(20,_,7,0,"ion-item-options",18),u.gc()}if(2&c){var n=t.$implicit,e=u.tc();u.Ob(3),u.Cc("src",e.ygen.getConditionalPhoto(n.image),u.Pc),u.Ob(3),u.Yc(n.name),u.Ob(2),u.Yc(u.vc(9,9,n.category)),u.Ob(2),u.Cc("ngIf",n.needParking),u.Ob(2),u.Yc(e.ygen.formatTimestampToDate(n.statusdate)),u.Ob(4),u.Yc(u.vc(17,11,"Out")),u.Ob(2),u.Cc("ngIf",e.canido),u.Ob(1),u.Cc("ngIf",e.canido),u.Ob(1),u.Cc("ngIf",e.canido)}}var T,A,N=function(){return{check:"Tanker",property:"category"}},H=[{path:"",component:(T=function(){function c(t,i,n,e,o,r,a,u){var l=this;_classCallCheck(this,c),this.modalCtrl=t,this.loadingCtrl=i,this.navCtrl=n,this.route=e,this.authService=o,this.boardService=r,this.ygen=a,this.ydataservice=u,this.viewHistory=!1,this.currentHistory=[],this.showOccupied=!1,this.current={name:""},this.isApp=!0,this.searchQuery="",this.tempItems=new Array,this.items=new Array,this.showButton=!0,this.occupiedVisitoParking=0,this.totalVisitoParking=0,this.historyCalc=0,this.showVisitorCounter=!1,this.workers=r.getWorkers(),this.workers.forEach((function(c){l.items=c})),this.workers.pipe(Object(s.a)((function(c){return l.historyCalc=0,c.filter((function(c){return"Tanker"==c.category}))}))).forEach((function(c){c.forEach((function(c){l.historyCalc=l.historyCalc+Object.keys(c.history).length}))})),o.authorizeForAction("gate")&&(this.canido=!0),r.getItems().subscribe((function(c){l.showVisitorCounter=c.istvp,l.totalVisitoParking=c.tvp}))}return _createClass(c,[{key:"ngOnInit",value:function(){}},{key:"getShowAvailable",value:function(c){return 0==c?"dadared":c<=5?"dadayellow":"dada"}},{key:"openModal",value:function(c,t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this.ydataservice.setData("current",c),this.ydataservice.setData("currentHistory",t),this.ydataservice.setData("comingfrom","inpage"),this.route.navigateByUrl("/history");case 1:case"end":return i.stop()}}),i,this)})))}},{key:"ionViewDidLoad",value:function(){}},{key:"isamember",value:function(){return!0}},{key:"out",value:function(c){var t=+new Date;this.searchbar.value="",this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),c,{indate:c.statusdate,outdate:t});var i={in:"false",statusdate:t,needParking:!1};this.boardService.getWorkersCrud().update(c.$key,i)}},{key:"getOccupied",value:function(c){return c.needParking?"occu":""}},{key:"history",value:function(c){this.current=c,this.currentHistory=[];for(var t=0,i=Object.entries(c.history);t<i.length;t++){var n=_slicedToArray(i[t],2),e=(n[0],n[1]);this.currentHistory.push(e)}this.openModal(this.current,this.currentHistory)}},{key:"historyDone",value:function(){this.current={name:""},this.currentHistory=[],this.viewHistory=!1}},{key:"in",value:function(c){this.ydataservice.setData("update",this.boardService.getWorkersCrud()),this.ydataservice.setData("comingin",c),this.searchbar.value="",this.route.navigateByUrl("/enterdetail")}},{key:"removeFromSearch",value:function(c){this.tempItems.findIndex((function(t){return t.$key==c.$key}))>-1&&(this.tempItems=this.tempItems.filter((function(t){return t.$key!=c.$key})))}},{key:"delete",value:function(c){this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),c,{indate:c.statusdate,outdate:""}),this.boardService.getWorkersCrud().remove(c.$key),this.removeFromSearch(c)}},{key:"editMe",value:function(c){}},{key:"gotoExternal",value:function(c){window.location.href=c}},{key:"showPhoto",value:function(c,t){this.ygen.openimage(c,t)}},{key:"getItems",value:function(c){this.ocontent.scrollToTop(100),console.log(" search ready ",this.items);var t=c.target.value;this.searchQuery=t,t&&""!=t.trim()&&t.length>=2&&(this.tempItems=this.items.filter((function(c){return console.log("item",c),c.name.toLowerCase().indexOf(t.toLowerCase())>-1})))}}]),c}(),T.\u0275fac=function(c){return new(c||T)(u.bc(r.mb),u.bc(r.kb),u.bc(r.nb),u.bc(o.j),u.bc(l.M),u.bc(l.i),u.bc(l.T),u.bc(l.R))},T.\u0275cmp=u.Vb({type:T,selectors:[["app-tanker"]],viewQuery:function(c,t){var i;1&c&&(u.ed(g,!0),u.ed(f,!0)),2&c&&(u.Jc(i=u.qc())&&(t.searchbar=i.first),u.Jc(i=u.qc())&&(t.ocontent=i.first))},decls:16,vars:17,consts:[[3,"color"],["debounce","100",3,"placeholder","ionChange"],["mySearchbar",""],["id","notification"],[1,"sumcounter"],["padding",""],["ocontent",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"dadao"],["item-start","",3,"click"],[3,"src"],["ion-button","","color","secondary",3,"click"],["name","call"],["slot","start",3,"click"],["color","success",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["side","start",4,"ngIf"],["side","end",4,"ngIf"],[2,"color","red"],[2,"color","green"],["color","success",3,"click"],["slot","icon-only","name","log-in"],["color","danger",3,"click"],["slot","icon-only","name","log-out"],["side","start"],[3,"click"],["slot","icon-only","name","book"],["side","end"],["color","secondary",3,"click"],["slot","icon-only","name","call"],["slot","icon-only","name","trash"],["color","warning",3,"click"],["slot","icon-only","name","create"]],template:function(c,t){1&c&&(u.hc(0,"ion-header"),u.hc(1,"ion-toolbar",0),u.hc(2,"ion-searchbar",1,2),u.pc("ionChange",(function(c){return t.getItems(c)})),u.uc(4,"translate"),u.gc(),u.gc(),u.gc(),u.hc(5,"ion-item",3),u.hc(6,"span",4),u.Xc(7),u.uc(8,"translate"),u.gc(),u.gc(),u.hc(9,"ion-content",5,6),u.Vc(11,d,10,10,"ion-row",7),u.Vc(12,P,12,8,"ion-list",7),u.Vc(13,S,21,13,"ion-item-sliding",8),u.uc(14,"inpipe"),u.uc(15,"async"),u.gc()),2&c&&(u.Ob(1),u.Cc("color","warning"),u.Ob(1),u.Dc("placeholder",u.vc(4,7,"Search Tanker")),u.Ob(5),u.ad("",u.vc(8,9,"Total")," - ",t.historyCalc,""),u.Ob(4),u.Cc("ngIf",0),u.Ob(1),u.Cc("ngIf",(null==t.searchQuery?null:t.searchQuery.length)>=1),u.Ob(1),u.Cc("ngForOf",u.wc(14,11,u.vc(15,14,t.workers),u.Fc(16,N))))},directives:[r.y,r.hb,r.S,r.ub,r.D,r.s,n.m,n.l,r.R,r.r,r.K,r.e,r.z,r.I,r.J,r.i,r.H,r.G],pipes:[h.c,l.t,n.b],styles:[".counter[_ngcontent-%COMP%]{font-size:2em!important;background-color:#faebd7;width:100px}.counter[_ngcontent-%COMP%], .sumcounter[_ngcontent-%COMP%]{float:right;font-weight:bolder;text-align:center}.sumcounter[_ngcontent-%COMP%]{font-size:2.5em;background-color:#aeed85;width:100%}#notification[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;z-index:99;top:0;background-color:#000}"]}),T)}],Y=((A=function c(){_classCallCheck(this,c)}).\u0275mod=u.Zb({type:A}),A.\u0275inj=u.Yb({factory:function(c){return new(c||A)},imports:[[n.c,e.j,r.ib,l.H,l.o,l.b,o.n.forChild(H)]]}),A)}}]);