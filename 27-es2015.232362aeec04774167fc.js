(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"8roW":function(t,e,c){"use strict";c.r(e),c.d(e,"CatalogwebPageModule",(function(){return P}));var n=c("ofXK"),o=c("3Pt+"),i=c("TEn/"),s=c("tyNb"),a=c("LRne"),r=c("q3Kh"),l=c("pwB6"),d=c("JIr8"),h=c("un/a"),u=c("fXoL"),g=c("gren"),p=c("tk/3"),b=c("1jcm"),f=c("hV0v"),m=c("sYmb");function v(t,e){1&t&&u.cc(0,"ion-progress-bar",8)}function y(t,e){if(1&t){const t=u.ic();u.hc(0,"ion-item"),u.hc(1,"mat-slide-toggle",9),u.pc("ngModelChange",(function(e){return u.Nc(t),u.tc().saveonlytoglobal=e})),u.Xc(2),u.uc(3,"translate"),u.gc(),u.gc()}if(2&t){const t=u.tc();u.Ob(1),u.Cc("ngModel",t.saveonlytoglobal),u.Ob(1),u.Zc("",u.vc(3,2,"Save only to Global")," ")}}function w(t,e){1&t&&(u.hc(0,"div"),u.Xc(1),u.uc(2,"translate"),u.gc()),2&t&&(u.Ob(1),u.Zc(" ",u.vc(2,1,"No Product Found")," "))}function O(t,e){if(1&t){const t=u.ic();u.hc(0,"app-productcard-grandbazar",12),u.pc("actionevent",(function(e){return u.Nc(t),u.tc(3).perform(e)})),u.gc()}if(2&t){const t=e.$implicit,c=u.tc(3);u.Cc("product",t)("webcatalogupload",!0)("productlist",c.crudList)("onpage","catalogweb")}}function k(t,e){if(1&t&&(u.hc(0,"div"),u.Vc(1,w,3,3,"div",5),u.Vc(2,O,1,4,"app-productcard-grandbazar",11),u.gc()),2&t){const t=e.ngIf,c=u.tc(2);u.Ob(1),u.Cc("ngIf",0==t.length),u.Ob(1),u.Cc("ngForOf",c.processlist(t,c.whatsize))}}function C(t,e){if(1&t&&(u.hc(0,"div",10),u.Vc(1,k,3,2,"div",5),u.uc(2,"searchproducts"),u.gc()),2&t){const t=u.tc(),e=u.Kc(9);u.Ob(1),u.Cc("ngIf",u.xc(2,1,t.productlist,t.searchstring,e.value))}}function I(t,e){if(1&t){const t=u.ic();u.hc(0,"ion-infinite-scroll",13),u.pc("ionInfinite",(function(e){return u.Nc(t),u.tc().loadData(e)})),u.cc(1,"ion-infinite-scroll-content",14),u.uc(2,"translate"),u.gc()}2&t&&(u.Ob(1),u.Dc("loadingText",u.vc(2,1,"Loading more data...")))}const S=[{path:"",component:(()=>{class t{constructor(t,e,c,n,o,i){this.ngxUiLoaderService=t,this.alertme=e,this.http=c,this.centerdb=n,this.ydata=o,this.ygen=i,this.addItemList=[],this.productlistcount=0,this.totalproducts=0,this.showscroll=!1,this.productlimit=50,this.saveonlytoglobal=!1,this.whatsize=50,this.queryText="",this.searchstring="{}"}ngOnInit(){this.centerdb.currenttenant.subscribe(t=>{t&&(this.crudList=new l.p(l.P.getpath()+"/shop/products",this.ydata.getDatabase(),!0,this.ygen.getUid()),this.crudList.getList().subscribe(t=>{this.productlimit=t.length}))}),this.ngxUiLoaderService.start(),this.centerdb.currenttenant.subscribe(t=>{this.crudList=new l.p(l.P.getpath()+"/shop/products",this.ydata.getDatabase(),!0,this.ygen.getUid())}),this.webcatalogs=this.http.get("https://bandhanmaratha.firebaseio.com/catalogmaster.json").pipe(Object(r.map)(t=>(this.productlistcount=Object.keys(t).length,this.showscroll=!0,Object.keys(t).map(e=>Object.assign({maxqty:10,key:e},t[e])))),Object(d.a)(t=>(this.alertme.errordata("Error Retriving the Web Catalog From Remote Server...Please refresh.."),this.ngxUiLoaderService.stop(),Object(a.a)([]))),Object(h.a)(2)),this.webcatalogs.subscribe(t=>{this.productlist=t,this.ngxUiLoaderService.stop()})}addtolist(t){this.addItemList.push(t)}processlist(t,e=50){return t.length<e&&(e=t.length),t.slice(0,e)}loadData(t){setTimeout(()=>{console.log("Done"),t.target.complete(),this.whatsize>=this.productlistcount?t.target.disabled=!0:(t.target.disabled=!1,this.whatsize=this.whatsize+50)},500)}trimObjValues(t){return Object.keys(t).reduce((e,c)=>(e[c]="string"==typeof t[c]?t[c].trim():t[c],e),{})}saveItem(t){let e=(t=this.trimObjValues(t)).key;delete t.key,this.saveonlytoglobal||(this.ygen.canAddProducts()?this.crudList.addtolist(t):this.alertme.openSnackBar(`Reach ${this.productlimit} maxlimit of Products will not be added`,"OK")),this.globalsave(t,e)}globalsave(t,e){e&&e.length>0&&this.ygen.isSuperAdmin()&&this.http.put("https://bandhanmaratha.firebaseio.com/catalogmaster/"+e+".json",t).subscribe(t=>{})}globaldelete(t,e){e&&e.length>0&&this.ygen.isSuperAdmin()&&this.http.delete("https://bandhanmaratha.firebaseio.com/catalogmaster/"+e+".json").subscribe(t=>{})}perform(t){switch(t.what){case"add":t.event.discount=this.getDiscount(t.event),this.saveItem(t.event),this.productlist=this.productlist.filter(e=>e.key!=t.event.key),this.alertme.openSnackBar("Product Added to Your Catalog","Ok");break;case"delete":this.productlist=this.productlist.filter(e=>e.key!=t.event.key),this.alertme.openSnackBar("Product deleted","Ok");break;case"deletex":this.productlist=this.productlist.filter(e=>e.key!=t.event.key),this.globaldelete(t.event,t.event.key),this.alertme.openSnackBar("Product deleted","Ok");break;case"copy":t.event.discount=this.getDiscount(t.event),this.productlist.push(t.event),this.alertme.openSnackBar("Product copied","Ok")}}getDiscount(t){let e=t.mrp?t.mrp:200;return(100*(e-(t.price?t.price:100))/e).toFixed(0)}getItems(t){console.log(t)}setSearchedProducts(t){this.totalproducts=t.length}}return t.\u0275fac=function(e){return new(e||t)(u.bc(g.c),u.bc(l.a),u.bc(p.b),u.bc(l.P),u.bc(l.Q),u.bc(l.T))},t.\u0275cmp=u.Vb({type:t,selectors:[["app-catalogweb"]],decls:20,vars:17,consts:[[3,"color"],["slot","start"],["debounce","100",3,"placeholder","ngModel","ionChange","ngModelChange"],["mySearchbar",""],["loading",""],[4,"ngIf"],["class","productlist",4,"ngIf","ngIfElse"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["type"," indeterminate","reversed","true"],[3,"ngModel","ngModelChange"],[1,"productlist"],[3,"product","webcatalogupload","productlist","onpage","actionevent",4,"ngFor","ngForOf"],[3,"product","webcatalogupload","productlist","onpage","actionevent"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles",3,"loadingText"]],template:function(t,e){if(1&t&&(u.hc(0,"ion-header"),u.hc(1,"ion-toolbar",0),u.hc(2,"ion-buttons",1),u.cc(3,"ion-back-button"),u.gc(),u.hc(4,"ion-title"),u.Xc(5),u.uc(6,"translate"),u.gc(),u.gc(),u.hc(7,"ion-toolbar",0),u.hc(8,"ion-searchbar",2,3),u.pc("ionChange",(function(t){return e.getItems(t)}))("ngModelChange",(function(t){return e.queryText=t})),u.uc(10,"translate"),u.gc(),u.gc(),u.gc(),u.hc(11,"ion-content"),u.Vc(12,v,1,0,"ng-template",null,4,u.Wc),u.hc(14,"ion-item"),u.Xc(15),u.gc(),u.Vc(16,y,4,4,"ion-item",5),u.Vc(17,C,3,5,"div",6),u.uc(18,"async"),u.Vc(19,I,3,3,"ion-infinite-scroll",7),u.gc()),2&t){const t=u.Kc(13);u.Ob(1),u.Cc("color","warning"),u.Ob(4),u.Yc(u.vc(6,11,"Web Catalog")),u.Ob(2),u.Cc("color","warning"),u.Ob(1),u.Dc("placeholder",u.vc(10,13,"Search Products")),u.Cc("ngModel",e.queryText),u.Ob(7),u.ad(' You are using "',e.ygen.getSubscriptionType(),'" subscription; You can add max ',e.ygen.maxproductsCanAdded()," products; "),u.Ob(1),u.Cc("ngIf",e.ygen.isSuperAdmin()),u.Ob(1),u.Cc("ngIf",u.vc(18,15,e.webcatalogs))("ngIfElse",t),u.Ob(2),u.Cc("ngIf",e.showscroll)}},directives:[i.y,i.hb,i.j,i.f,i.g,i.fb,i.S,i.ub,o.p,o.s,i.s,i.D,n.m,i.P,b.a,n.l,f.a,i.A,i.B],pipes:[m.c,n.b,l.F],styles:[".productCardSection[_ngcontent-%COMP%]{white-space:nowrap;height:auto;overflow-X:scroll;overflow-y:hidden}.mytopsaver[_ngcontent-%COMP%]{display:flex}"]}),t})()}];let x=(()=>{class t{}return t.\u0275mod=u.Zb({type:t}),t.\u0275inj=u.Yb({factory:function(e){return new(e||t)},imports:[[s.n.forChild(S)],s.n]}),t})();var j=c("uUdd");let P=(()=>{class t{}return t.\u0275mod=u.Zb({type:t}),t.\u0275inj=u.Yb({factory:function(e){return new(e||t)},imports:[[n.c,o.j,i.ib,l.H,l.o,l.b,j.a,x]]}),t})()}}]);