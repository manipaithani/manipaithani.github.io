(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{EfXs:function(c,t,i){"use strict";i.r(t),i.d(t,"InPageModule",(function(){return E}));var n=i("ofXK"),o=i("3Pt+"),e=i("tyNb"),r=i("TEn/"),s=i("mrSG"),a=i("lJxs"),h=i("fXoL"),l=i("pwB6"),u=i("sYmb");const g=["mySearchbar"],m=["ocontent"];function p(c,t){if(1&c){const c=h.ic();h.hc(0,"ion-item"),h.hc(1,"ion-avatar",8),h.pc("click",(function(){h.Nc(c);const i=t.$implicit;return h.tc(2).showPhoto(i.image,i.name)})),h.cc(2,"img",9),h.gc(),h.hc(3,"h2"),h.Xc(4),h.gc(),h.hc(5,"p"),h.Xc(6),h.uc(7,"translate"),h.gc(),h.hc(8,"p"),h.Xc(9),h.gc(),h.hc(10,"button",10),h.pc("click",(function(){h.Nc(c);const i=t.$implicit;return h.tc(2).gotoExternal("tel:"+i.mobile)})),h.cc(11,"ion-icon",11),h.Xc(12),h.uc(13,"translate"),h.gc(),h.gc()}if(2&c){const c=t.$implicit,i=h.tc(2);h.Ob(2),h.Cc("src",i.ygen.getConditionalPhoto(c.image),h.Pc),h.Ob(2),h.Zc("",c.name," "),h.Ob(2),h.Yc(h.vc(7,5,c.category)),h.Ob(3),h.Yc(c.vehicalnum),h.Ob(3),h.Zc(" ",h.vc(13,7,"Call")," ")}}const d=function(){return{check:!0,property:"needParking"}};function b(c,t){if(1&c&&(h.hc(0,"ion-row"),h.hc(1,"ion-col",7),h.hc(2,"ion-list"),h.hc(3,"ion-item"),h.hc(4,"h2"),h.Xc(5),h.uc(6,"translate"),h.gc(),h.gc(),h.Vc(7,p,14,9,"ion-item",6),h.uc(8,"inpipe"),h.uc(9,"async"),h.gc(),h.gc(),h.gc()),2&c){const c=h.tc();h.Ob(5),h.Yc(h.vc(6,2,"Occupied Visitor Parking")),h.Ob(2),h.Cc("ngForOf",h.wc(8,4,h.vc(9,7,c.workers),h.Fc(9,d)))}}function f(c,t){if(1&c&&(h.hc(0,"p"),h.Xc(1),h.uc(2,"translate"),h.gc()),2&c){const c=h.tc().$implicit;h.Ob(1),h.ad("",h.vc(2,2,"Vehical Number")," :",c.vehicalnum,"")}}function y(c,t){1&c&&(h.hc(0,"p"),h.Xc(1,"\xa0\xa0"),h.hc(2,"b",17),h.Xc(3),h.uc(4,"translate"),h.gc(),h.gc()),2&c&&(h.Ob(3),h.Yc(h.vc(4,1,"Out")))}function v(c,t){1&c&&(h.hc(0,"p"),h.Xc(1,"\xa0\xa0"),h.hc(2,"b",18),h.Xc(3),h.uc(4,"translate"),h.gc(),h.gc()),2&c&&(h.Ob(3),h.Yc(h.vc(4,1,"In")))}function k(c,t){if(1&c){const c=h.ic();h.hc(0,"ion-button",19),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc(2).in(t)})),h.cc(1,"ion-icon",20),h.Xc(2),h.uc(3,"translate"),h.gc()}2&c&&(h.Ob(2),h.Zc(" ",h.vc(3,1,"Entering In")," "))}function O(c,t){if(1&c){const c=h.ic();h.hc(0,"ion-button",21),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc(2).out(t)})),h.cc(1,"ion-icon",22),h.Xc(2),h.uc(3,"translate"),h.gc()}2&c&&(h.Ob(2),h.Zc(" ",h.vc(3,1,"Exiting Out")," "))}function w(c,t){if(1&c){const c=h.ic();h.hc(0,"ion-item-options",23),h.hc(1,"ion-item-option",24),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc(2).history(t)})),h.cc(2,"ion-icon",25),h.gc(),h.gc()}}function C(c,t){if(1&c){const c=h.ic();h.hc(0,"ion-item-options",26),h.hc(1,"ion-item-option",27),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc(2).gotoExternal("tel:"+t.mobile)})),h.cc(2,"ion-icon",28),h.gc(),h.hc(3,"ion-item-option",21),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc(2).delete(t)})),h.cc(4,"ion-icon",29),h.gc(),h.hc(5,"ion-item-option",30),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc(2).editMe(t)})),h.cc(6,"ion-icon",31),h.gc(),h.gc()}}function I(c,t){if(1&c){const c=h.ic();h.hc(0,"ion-item-sliding"),h.hc(1,"ion-item"),h.hc(2,"ion-avatar",12),h.pc("click",(function(){h.Nc(c);const i=t.$implicit;return h.tc(2).showPhoto(i.image,i.name)})),h.cc(3,"img",9),h.gc(),h.hc(4,"ion-label"),h.hc(5,"h2"),h.Xc(6),h.gc(),h.hc(7,"p"),h.Xc(8),h.uc(9,"translate"),h.gc(),h.Vc(10,f,3,4,"p",5),h.hc(11,"p"),h.Xc(12),h.gc(),h.Vc(13,y,5,3,"p",5),h.Vc(14,v,5,3,"p",5),h.Vc(15,k,4,3,"ion-button",13),h.Vc(16,O,4,3,"ion-button",14),h.gc(),h.gc(),h.Vc(17,w,3,0,"ion-item-options",15),h.Vc(18,C,7,0,"ion-item-options",16),h.gc()}if(2&c){const c=t.$implicit,i=h.tc(2);h.Ob(3),h.Cc("src",i.ygen.getConditionalPhoto(c.image),h.Pc),h.Ob(3),h.Yc(c.name),h.Ob(2),h.Yc(h.vc(9,11,c.category)),h.Ob(2),h.Cc("ngIf",c.needParking),h.Ob(2),h.Yc(i.ygen.formatTimestampToDate(c.statusdate)),h.Ob(1),h.Cc("ngIf","false"==c.in),h.Ob(1),h.Cc("ngIf","true"==c.in),h.Ob(1),h.Cc("ngIf",i.canido&&"false"==c.in),h.Ob(1),h.Cc("ngIf",i.canido&&"true"==c.in),h.Ob(1),h.Cc("ngIf",i.canido),h.Ob(1),h.Cc("ngIf",i.canido)}}function V(c,t){if(1&c&&(h.hc(0,"ion-list"),h.hc(1,"ion-item"),h.hc(2,"h1"),h.Xc(3),h.uc(4,"translate"),h.hc(5,"b"),h.Xc(6),h.gc(),h.gc(),h.gc(),h.Vc(7,I,19,13,"ion-item-sliding",6),h.hc(8,"ion-row"),h.hc(9,"h1"),h.Xc(10),h.uc(11,"translate"),h.gc(),h.gc(),h.gc()),2&c){const c=h.tc();h.Ob(3),h.Zc("",h.vc(4,4,"Searched list")," \xa0"),h.Ob(3),h.Yc(c.tempItems.length),h.Ob(1),h.Cc("ngForOf",c.tempItems),h.Ob(3),h.Zc(" \xa0",h.vc(11,6,"In List"),"")}}function X(c,t){if(1&c&&(h.hc(0,"p"),h.Xc(1),h.uc(2,"translate"),h.gc()),2&c){const c=h.tc().$implicit;h.Ob(1),h.ad("",h.vc(2,2,"Vehical Number")," :",c.vehicalnum,"")}}function $(c,t){if(1&c){const c=h.ic();h.hc(0,"ion-button",21),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc().out(t)})),h.cc(1,"ion-icon",22),h.Xc(2),h.uc(3,"translate"),h.gc()}2&c&&(h.Ob(2),h.Zc(" ",h.vc(3,1,"Exiting Out")," "))}function P(c,t){if(1&c){const c=h.ic();h.hc(0,"ion-item-options",23),h.hc(1,"ion-item-option",24),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc().history(t)})),h.cc(2,"ion-icon",25),h.gc(),h.gc()}}function N(c,t){if(1&c){const c=h.ic();h.hc(0,"ion-item-options",26),h.hc(1,"ion-item-option",27),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc().gotoExternal("tel:"+t.mobile)})),h.cc(2,"ion-icon",28),h.gc(),h.hc(3,"ion-item-option",21),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc().delete(t)})),h.cc(4,"ion-icon",29),h.gc(),h.hc(5,"ion-item-option",30),h.pc("click",(function(){h.Nc(c);const t=h.tc().$implicit;return h.tc().editMe(t)})),h.cc(6,"ion-icon",31),h.gc(),h.gc()}}function S(c,t){if(1&c){const c=h.ic();h.hc(0,"ion-item-sliding"),h.hc(1,"ion-item"),h.hc(2,"ion-avatar",12),h.pc("click",(function(){h.Nc(c);const i=t.$implicit;return h.tc().showPhoto(i.image,i.name)})),h.cc(3,"img",9),h.gc(),h.hc(4,"ion-label"),h.hc(5,"h2"),h.Xc(6),h.gc(),h.hc(7,"p"),h.Xc(8),h.uc(9,"translate"),h.gc(),h.Vc(10,X,3,4,"p",5),h.hc(11,"p"),h.Xc(12),h.gc(),h.hc(13,"p"),h.Xc(14,"\xa0\xa0"),h.hc(15,"b",18),h.Xc(16),h.uc(17,"translate"),h.gc(),h.gc(),h.Vc(18,$,4,3,"ion-button",14),h.gc(),h.gc(),h.Vc(19,P,3,0,"ion-item-options",15),h.Vc(20,N,7,0,"ion-item-options",16),h.gc()}if(2&c){const c=t.$implicit,i=h.tc();h.Ob(3),h.Cc("src",i.ygen.getConditionalPhoto(c.image),h.Pc),h.Ob(3),h.Yc(c.name),h.Ob(2),h.Yc(h.vc(9,9,c.category)),h.Ob(2),h.Cc("ngIf",c.needParking),h.Ob(2),h.Yc(i.ygen.formatTimestampToDate(c.statusdate)),h.Ob(4),h.Yc(h.vc(17,11,"In")),h.Ob(2),h.Cc("ngIf",i.canido),h.Ob(1),h.Cc("ngIf",i.canido),h.Ob(1),h.Cc("ngIf",i.canido)}}const Y=function(){return{check:"true",property:"in"}},D=[{path:"",component:(()=>{class c{constructor(c,t,i,n,o,e,r,s){this.modalCtrl=c,this.loadingCtrl=t,this.navCtrl=i,this.route=n,this.authService=o,this.boardService=e,this.ygen=r,this.ydataservice=s,this.viewHistory=!1,this.currentHistory=[],this.showOccupied=!1,this.current={name:""},this.isApp=!0,this.searchQuery="",this.tempItems=new Array,this.items=new Array,this.showButton=!0,this.occupiedVisitoParking=0,this.totalVisitoParking=0,this.showVisitorCounter=!1,this.workers=e.getWorkers(),this.workers.forEach(c=>{this.items=c}),this.workers.pipe(Object(a.a)(c=>(this.occupiedVisitoParking=0,c.filter(c=>c.needParking)))).forEach(c=>{c.forEach(c=>{this.occupiedVisitoParking=this.occupiedVisitoParking+1})}),o.authorizeForAction("gate")&&(this.canido=!0),e.getItems().subscribe(c=>{this.showVisitorCounter=c.istvp,this.totalVisitoParking=c.tvp})}ngOnInit(){}getShowAvailable(c){return 0==c?"dadared":c<=5?"dadayellow":"dada"}openModal(c,t){return Object(s.a)(this,void 0,void 0,(function*(){this.ydataservice.setData("current",c),this.ydataservice.setData("currentHistory",t),this.ydataservice.setData("comingfrom","inpage"),this.route.navigateByUrl("/history")}))}ionViewDidLoad(){}isamember(){return!0}out(c){let t=+new Date;this.searchbar.value="",this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),c,{indate:c.statusdate,outdate:t});let i={in:"false",statusdate:t,needParking:!1};this.boardService.getWorkersCrud().update(c.$key,i)}getOccupied(c){return c.needParking?"occu":""}history(c){this.current=c,this.currentHistory=[];for(let[t,i]of Object.entries(c.history))this.currentHistory.push(i);this.openModal(this.current,this.currentHistory)}historyDone(){this.current={name:""},this.currentHistory=[],this.viewHistory=!1}in(c){this.ydataservice.setData("update",this.boardService.getWorkersCrud()),this.ydataservice.setData("comingin",c),this.searchbar.value="",this.route.navigateByUrl("/enterdetail")}removeFromSearch(c){this.tempItems.findIndex(t=>t.$key==c.$key)>-1&&(this.tempItems=this.tempItems.filter(t=>t.$key!=c.$key))}delete(c){this.boardService.updateOutHistory(this.boardService.getWorkersCrud(),c,{indate:c.statusdate,outdate:""}),this.boardService.getWorkersCrud().remove(c.$key),this.removeFromSearch(c)}editMe(c){this.ydataservice.setData("editme",c),this.route.navigateByUrl("/presentdir")}gotoExternal(c){window.location.href=c}showPhoto(c,t){this.ygen.openimage(c,t)}getItems(c){this.ocontent.scrollToTop(100),console.log(" search ready ",this.items);let t=c.target.value;this.searchQuery=t,t&&""!=t.trim()&&t.length>=2&&(this.tempItems=this.items.filter(c=>(console.log("item",c),c.name.toLowerCase().indexOf(t.toLowerCase())>-1)))}}return c.\u0275fac=function(t){return new(t||c)(h.bc(r.mb),h.bc(r.kb),h.bc(r.nb),h.bc(e.j),h.bc(l.M),h.bc(l.i),h.bc(l.T),h.bc(l.R))},c.\u0275cmp=h.Vb({type:c,selectors:[["app-in"]],viewQuery:function(c,t){var i;1&c&&(h.ed(g,!0),h.ed(m,!0)),2&c&&(h.Jc(i=h.qc())&&(t.searchbar=i.first),h.Jc(i=h.qc())&&(t.ocontent=i.first))},decls:12,vars:13,consts:[[3,"color"],["debounce","100",3,"placeholder","ionChange"],["mySearchbar",""],["padding",""],["ocontent",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"dadao"],["item-start","",3,"click"],[3,"src"],["ion-button","","color","secondary",3,"click"],["name","call"],["slot","start",3,"click"],["color","success",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["side","start",4,"ngIf"],["side","end",4,"ngIf"],[2,"color","red"],[2,"color","green"],["color","success",3,"click"],["slot","icon-only","name","log-in"],["color","danger",3,"click"],["slot","icon-only","name","log-out"],["side","start"],[3,"click"],["slot","icon-only","name","book"],["side","end"],["color","secondary",3,"click"],["slot","icon-only","name","call"],["slot","icon-only","name","trash"],["color","warning",3,"click"],["slot","icon-only","name","create"]],template:function(c,t){1&c&&(h.hc(0,"ion-header"),h.hc(1,"ion-toolbar",0),h.hc(2,"ion-searchbar",1,2),h.pc("ionChange",(function(c){return t.getItems(c)})),h.uc(4,"translate"),h.gc(),h.gc(),h.gc(),h.hc(5,"ion-content",3,4),h.Vc(7,b,10,10,"ion-row",5),h.Vc(8,V,12,8,"ion-list",5),h.Vc(9,S,21,13,"ion-item-sliding",6),h.uc(10,"inpipe"),h.uc(11,"async"),h.gc()),2&c&&(h.Ob(1),h.Cc("color","warning"),h.Ob(1),h.Dc("placeholder",h.vc(4,5,"Search")),h.Ob(5),h.Cc("ngIf",0),h.Ob(1),h.Cc("ngIf",(null==t.searchQuery?null:t.searchQuery.length)>=1),h.Ob(1),h.Cc("ngForOf",h.wc(10,7,h.vc(11,10,t.workers),h.Fc(12,Y))))},directives:[r.y,r.hb,r.S,r.ub,r.s,n.m,n.l,r.R,r.r,r.K,r.D,r.e,r.z,r.I,r.J,r.i,r.H,r.G],pipes:[u.c,l.t,n.b],styles:[""]}),c})()}];let E=(()=>{class c{}return c.\u0275mod=h.Zb({type:c}),c.\u0275inj=h.Yb({factory:function(t){return new(t||c)},imports:[[n.c,o.j,r.ib,l.H,l.o,l.b,e.n.forChild(D)]]}),c})()}}]);