(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{F4UR:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginModule",(function(){return L}));var o=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),c=n("TEn/"),a=n("mrSG"),s=n("pwB6"),l=n("DVUX"),h=n("Oipj"),d=n("iqUP"),g=n("ar4q"),u=n("fXoL"),p=n("gren"),f=n("Wp6s"),m=n("kmnG"),b=n("B9HH"),v=n("qFsG"),w=n("sYmb");function O(e,t){1&e&&(u.hc(0,"mat-error"),u.Xc(1,"Required Field"),u.gc())}function y(e,t){1&e&&(u.hc(0,"mat-error"),u.Xc(1,"Invalid Mobile Number "),u.gc())}function P(e,t){if(1&e){const e=u.ic();u.hc(0,"ion-button",18),u.pc("click",(function(){u.Nc(e);const t=u.tc(3);return t.askValidatePhone(t.phoneForm.controls.phone)})),u.Xc(1),u.uc(2,"translate"),u.gc()}if(2&e){u.tc();const e=u.Kc(1);u.Cc("disabled",!e.form.valid||(null==e.form.controls.phone||null==e.form.controls.phone.errors?null:e.form.controls.phone.errors.validatePhoneNumber)),u.Ob(1),u.Zc(" ",u.vc(2,2,"Request OTP")," ")}}const x=function(){return["us","in"]};function C(e,t){if(1&e&&(u.hc(0,"form",12,13),u.hc(2,"mat-form-field",14),u.cc(3,"ngx-mat-intl-tel-input",15,16),u.uc(5,"translate"),u.hc(6,"mat-hint"),u.Xc(7),u.gc(),u.Vc(8,O,2,0,"mat-error",2),u.Vc(9,y,2,0,"mat-error",2),u.gc(),u.hc(10,"div",5),u.Vc(11,P,3,4,"ion-button",17),u.gc(),u.gc()),2&e){const e=u.Kc(1),t=u.Kc(4),n=u.tc(2);u.Cc("formGroup",n.phoneForm),u.Ob(3),u.Dc("placeholder",u.vc(5,10,"Enter Mobile Number")),u.Cc("cssClass","custom")("preferredCountries",u.Fc(12,x))("enablePlaceholder",!0)("enableSearch",!0),u.Ob(4),u.Zc("e.g. ",t.selectedCountry.placeHolder,""),u.Ob(1),u.Cc("ngIf",null==e.form.controls.phone||null==e.form.controls.phone.errors?null:e.form.controls.phone.errors.required),u.Ob(1),u.Cc("ngIf",e.submitted&&(null==e.form.controls.phone||null==e.form.controls.phone.errors?null:e.form.controls.phone.errors.validatePhoneNumber)),u.Ob(2),u.Cc("ngIf",!n.goingon)}}function M(e,t){if(1&e){const e=u.ic();u.hc(0,"ion-button",24),u.pc("click",(function(){return u.Nc(e),u.tc(3).reAuthenticateOtp()})),u.Xc(1),u.uc(2,"translate"),u.gc()}2&e&&(u.Ob(1),u.Zc(" ",u.vc(2,1,"Or Ask OTP Again")," "))}function k(e,t){if(1&e){const e=u.ic();u.hc(0,"div"),u.hc(1,"mat-form-field",19),u.hc(2,"mat-label"),u.Xc(3),u.uc(4,"translate"),u.gc(),u.hc(5,"input",20,21),u.pc("ngModelChange",(function(t){return u.Nc(e),u.tc(2).verificationcode=t})),u.gc(),u.gc(),u.hc(7,"ion-button",22),u.pc("click",(function(){return u.Nc(e),u.tc(2).verifySMS()})),u.Xc(8),u.uc(9,"translate"),u.gc(),u.Vc(10,M,3,3,"ion-button",23),u.gc()}if(2&e){const e=u.tc(2);u.Ob(3),u.Yc(u.vc(4,4,"Enter OTP")),u.Ob(2),u.Cc("ngModel",e.verificationcode),u.Ob(3),u.Zc(" ",u.vc(9,6,"Verify OTP")," "),u.Ob(2),u.Cc("ngIf",e.redootp)}}function T(e,t){if(1&e&&(u.hc(0,"mat-card"),u.hc(1,"mat-card-header"),u.hc(2,"mat-card-title"),u.Xc(3),u.uc(4,"translate"),u.gc(),u.gc(),u.hc(5,"mat-card-content",3),u.hc(6,"div"),u.Vc(7,C,12,13,"form",9),u.gc(),u.Vc(8,k,11,8,"div",2),u.gc(),u.hc(9,"div",10),u.cc(10,"div",11),u.gc(),u.gc()),2&e){const e=u.tc();u.Ob(3),u.Zc(" ",u.vc(4,3,"Login using phone"),""),u.Ob(4),u.Cc("ngIf",!e.windowref.confirmationResult),u.Ob(1),u.Cc("ngIf",e.windowref.confirmationResult)}}let S=(()=>{class e{constructor(e,t,n,o,r,c,a,l,h,d,g,u,p){this.events=e,this.ngxUiLoaderService=t,this.fireauth=n,this.toastCtrl=o,this.ygen=r,this.alertme=c,this.yovalservice=a,this.yobuilderservice=l,this.ynotification=h,this.toasterService=d,this.yauth=g,this.ystorageservice=u,this.router=p,this.whatcontrolsmap=new Map,this.termandcoditions="https://grandbazarusa.github.io/assets/privacy.html",this.mybuttons=new Map,this.loadingindicator=!1,this.retry=!1,this.gototp=!1,this.redootp=!1,this.goingon=!1,this.phoneForm=new i.h({phone:new i.e(void 0,[i.y.required])}),this.askforotp=!1,this.OTP="",this.showOTPInput=!0,this.OTPmessage="An OTP is sent to your number. You should receive it in 15 s",this.startObject(),this.addressForm=new i.h({mobile:new i.e("",[i.y.required,i.y.minLength(2),i.y.maxLength(30),e=>{if(e.value){const n=/^\+?\d[\d -]{8,12}\d$/;if(console.log(n.test(e.value)),!n.test(e.value))return{"Invalid Phone":{value:e.value}};var t=_.parse(e.value,"IN");if(!_.isValidNumber(t))return{"Invalid Phone":{value:e.value}}}return null}])}),this.ygen.retrivedsetting.subscribe(e=>{e&&(this.termandcoditions=s.T.datamap.get("termandcoditions")?s.T.datamap.get("termandcoditions"):this.termandcoditions)})}ngOnInit(){this.windowref=this.ygen.nativeWindow}askValidatePhone(e){this.ngxUiLoaderService.start(),setTimeout(()=>{this.ngxUiLoaderService.stop(),this.goingon=!1},4e4),this.goingon=!0;let t=this;this.windowref.RecaptchaVerifier&&(this.windowref.RecaptchaVerifier.clear(),document.getElementById("recaptcha-container")?(document.getElementById("captchwrapper").innerHTML="",document.getElementById("captchwrapper").innerHTML='<div id="recaptcha-container"></div>'):document.getElementById("captchwrapper").innerHTML='<div id="recaptcha-container"></div>'),this.windowref.RecaptchaVerifier=new d.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(n){t.askforotp=!0,t.validatePhone(e)},"expired-callback":function(){t.toasterService.pop("warn","Capcha Expired, Please validate captcha ","Captcha expired."),t.windowref.confirmationResult=null,t.ngxUiLoaderService.stop()}}),this.windowref.RecaptchaVerifier.render(),this.windowref.RecaptchaVerifier.verify()}validatePhone(e){this.gototp=!1;var t=this.ygen.phoneNumberUtil.parse(e.value,"IN");if(this.ygen.isavalidphone(t)){var n=this.ygen.phoneE164(t);this.appVerifier=this.windowref.RecaptchaVerifier;let e=this;this.yauth.loginPhone({phonenumber:n,appverifier:this.appVerifier}).then((function(t){e.windowref.confirmationResult=t,e.gototp=!0,e.goingon=!1,e.ngxUiLoaderService.stop(),e.toasterService.pop("success","OTP sent to you mobile number "+n,"OTP Success"),setTimeout(()=>{e.redootp=!0,e.ngxUiLoaderService.stop()},25e3)})).catch((function(t){e.ngxUiLoaderService.stop(),e.goingon=!1,e.toasterService.pop("error","Error OTP SMS not send","OTP Failure"),e.alertme.openSnackBar(t.message,"Ok"),console.log(t),e.windowref.confirmationResult=null}))}else this.toasterService.pop("error","Not a valid mobile number, please correct","Validation Failure"),this.windowref.confirmationResult=null,this.goingon=!1,this.ngxUiLoaderService.stop()}verifySMS(){let e=this;this.ngxUiLoaderService.start(),this.windowref.confirmationResult.confirm(this.verificationcode).then(e=>{console.log("yeah ",e),this.windowref.confirmationResult=null,this.goingon=!1,this.ngxUiLoaderService.stop(),this.events.publish("user:signup",!0)}).catch(t=>{this.toasterService.pop("error",t.message,"Validation Failure"),e.redootp=!0,this.goingon=!1,this.ngxUiLoaderService.stop(),console.log(t,"Incorrect code entered??")})}reAuthenticateOtp(){this.windowref.confirmationResult=null,this.gototp=!1,this.ngxUiLoaderService.stop(),this.redootp=!1}startObject(){let e=new Map;e.set("userid",this.yobuilderservice.createType("userid","Enter User Name",!0,!0,!0,"email",1,"","Your email address")),e.set("password",this.yobuilderservice.createType("password","Enter Password",!0,!0,!0,"password",2,"")),e.set("rememberuser",this.yobuilderservice.createType("rememberuser","Remember Login",!0,!0,!0,"checkbox",2,!0)),e.set("agreement",this.yobuilderservice.createType("agreement","Agreed to Terms & Condtions",!0,!0,!0,"checkbox",2,!0)),this.inwhatformgroup=this.yobuilderservice.createFormGroup(e),this.whatcontrolsmap=this.yobuilderservice.createMap(e,this.inwhatformgroup);let t=new s.A("Sign In","unlock","lock_open","primary",!1);this.mybuttons.set("Action",t)}send(e){this.login(e.data.value)}cancel(e){this.startObject()}registerToken(e){this.ynotification.registertoken()}login(e){this.yauth.login(e).subscribe(e=>{e.subscribe(e=>{e.isError?this.alertme.errordata(e.message):this.yauth.isAuthenticated().subscribe(e=>{this.ystorageservice.isTenantSelection()&&this.router.navigateByUrl("/tenants")})})})}presentToast(e,t,n,o){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.toastCtrl.create({message:e,position:n,duration:o})).present()}))}next(){this.showOTPInput=!0,this.start()}start(){}stop(){}processSMS(e){const t=e.body;t&&-1!=t.indexOf("enappd_starters")&&(this.OTP=e.body.slice(0,6),console.log(this.OTP),this.OTPmessage="OTP received. Proceed to register",this.stop())}register(){""!=this.OTP?this.presentToast("You are successfully registered",!1,"top",1500):this.presentToast("Your OTP is not valid",!1,"bottom",1500)}}return e.\u0275fac=function(t){return new(t||e)(u.bc(s.Y),u.bc(p.c),u.bc(h.AngularFireAuth),u.bc(c.vb),u.bc(s.T),u.bc(s.a),u.bc(s.fb),u.bc(s.S),u.bc(s.U),u.bc(l.d),u.bc(s.M),u.bc(s.db),u.bc(r.j))},e.\u0275cmp=u.Vb({type:e,selectors:[["app-login"]],decls:35,vars:22,consts:[[3,"color"],["slot","start"],[4,"ngIf"],[1,"box"],[3,"captchaOn","whatform","whatformgroup","whichbuttons","actionEvent","cancelEvent"],[2,"display","flex","justify-content","center"],["rel","noreferrer nofollow noopener","target","_blank",3,"href"],["color","secondary","routerLink","/forgotpass"],["color","secondary","routerLink","/register"],[3,"formGroup",4,"ngIf"],["id","captchwrapper"],["id","recaptcha-container"],[3,"formGroup"],["f","ngForm"],[2,"width","80vw"],["name","phone","formControlName","phone",3,"cssClass","preferredCountries","enablePlaceholder","placeholder","enableSearch"],["phone",""],["color","danger","size","small","class","delete",3,"disabled","click",4,"ngIf"],["color","danger","size","small",1,"delete",3,"disabled","click"],[1,"animated","tada"],["type","text","matInput","",3,"ngModel","ngModelChange"],["verificationcaode",""],["color","danger","size","small",1,"delete",3,"click"],["color","secondary","size","small",3,"click",4,"ngIf"],["color","secondary","size","small",3,"click"]],template:function(e,t){1&e&&(u.hc(0,"ion-header"),u.hc(1,"ion-toolbar",0),u.hc(2,"ion-buttons",1),u.cc(3,"ion-menu-button"),u.gc(),u.hc(4,"ion-title"),u.Xc(5),u.uc(6,"translate"),u.gc(),u.gc(),u.gc(),u.hc(7,"ion-content"),u.hc(8,"ion-grid"),u.cc(9,"ion-col"),u.gc(),u.hc(10,"ion-grid"),u.hc(11,"ion-row"),u.hc(12,"ion-col"),u.Vc(13,T,11,5,"mat-card",2),u.gc(),u.gc(),u.hc(14,"ion-row"),u.hc(15,"ion-col"),u.hc(16,"mat-card"),u.hc(17,"mat-card-header"),u.hc(18,"mat-card-title"),u.Xc(19),u.uc(20,"translate"),u.gc(),u.gc(),u.hc(21,"mat-card-content",3),u.hc(22,"yogagainv2-dyanamic-page",4),u.pc("actionEvent",(function(e){return t.send(e)}))("cancelEvent",(function(e){return t.cancel(e)})),u.gc(),u.hc(23,"div",5),u.hc(24,"a",6),u.Xc(25),u.uc(26,"translate"),u.gc(),u.gc(),u.gc(),u.gc(),u.gc(),u.gc(),u.hc(27,"ion-row"),u.hc(28,"ion-col"),u.hc(29,"ion-button",7),u.Xc(30),u.uc(31,"translate"),u.gc(),u.hc(32,"ion-button",8),u.Xc(33),u.uc(34,"translate"),u.gc(),u.gc(),u.gc(),u.gc(),u.gc()),2&e&&(u.Ob(1),u.Cc("color",(t.ygen.isTenantSelection(),"secondary")),u.Ob(4),u.Yc(u.vc(6,12,"Login")),u.Ob(8),u.Cc("ngIf",t.ygen.inTenant()||!0),u.Ob(6),u.Zc(" ",u.vc(20,14,"OR Login via Email")," "),u.Ob(3),u.Cc("captchaOn",!1)("whatform",t.whatcontrolsmap)("whatformgroup",t.inwhatformgroup)("whichbuttons",t.mybuttons),u.Ob(2),u.Dc("href",t.termandcoditions,u.Pc),u.Ob(1),u.Yc(u.vc(26,16,"Read Terms and Conditions")),u.Ob(5),u.Zc(" ",u.vc(31,18,"Forgot Password")," "),u.Ob(3),u.Zc(" ",u.vc(34,20,"Signup")," "))},directives:[c.y,c.hb,c.j,c.N,c.fb,c.s,c.x,c.r,c.R,o.m,f.a,f.f,f.h,f.d,s.q,c.i,c.sb,r.l,i.A,i.q,i.i,m.c,b.a,i.p,i.g,m.f,m.b,m.g,v.b,i.c,i.s],pipes:[w.c],styles:['.main[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;justify-content:center}@media screen and (min-width:767px){ion-card[_ngcontent-%COMP%]{width:600px;margin:auto}}ion-card[_ngcontent-%COMP%]{--background:#fff;box-shadow:none;-webkit-box-shadow:none;overflow:scroll}.input[_ngcontent-%COMP%]{background-color:#f0f0f0;border:1px solid #d2d2d2;border-radius:9px;font-size:.9em!important}.otpinput[_ngcontent-%COMP%]{letter-spacing:30px;-webkit-padding-end:0;--padding-end:0;font-size:30px;border:none;background:#fff}.white[_ngcontent-%COMP%]{color:#fff}.OTP-border[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-bottom:1px solid}.small[_ngcontent-%COMP%]{font-size:13px}.small[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:unset!important}.button-color[_ngcontent-%COMP%]{background-color:var(--ion-color-mytheme)}.logo[_ngcontent-%COMP%]{width:1.25em!important}.grid[_ngcontent-%COMP%]{height:100vh;flex-direction:column}.grid[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{display:flex;justify-content:center}.row[_ngcontent-%COMP%]{flex-direction:row}.img-logo[_ngcontent-%COMP%]{height:120px;width:120px}.fire-logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding-bottom:30px}.bold[_ngcontent-%COMP%]{font-weight:700}.block[_ngcontent-%COMP%]{display:block}.transition[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f57c00 14%,#ffca00 96%)}.btn-color[_ngcontent-%COMP%]{color:#ffa000}.error[_ngcontent-%COMP%]{color:red;text-align:center;display:block;font-weight:700}@-webkit-keyframes spinner{to{transform:rotate(1turn)}}@keyframes spinner{to{transform:rotate(1turn)}}.spinner[_ngcontent-%COMP%]:before{content:" OTP";box-sizing:border-box;position:absolute;top:50%;left:50%;width:20px;height:20px;margin-top:-10px;margin-left:-10px;border-radius:50%;border:2px solid #fff;border-top-color:#000;-webkit-animation:spinner .8s linear infinite;animation:spinner .8s linear infinite}']}),e})();const _=g.PhoneNumberUtil.getInstance(),I=[{path:"",component:S}];let L=(()=>{class e{}return e.\u0275mod=u.Zb({type:e}),e.\u0275inj=u.Yb({factory:function(t){return new(t||e)},imports:[[o.c,i.j,c.ib,i.v,s.H,s.b,s.o,i.v,r.n.forChild(I)]]}),e})()}}]);